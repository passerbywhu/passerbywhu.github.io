<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://yoursite.com">
  <title>Gradle基础概念 | 一念之间</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="自动化构建工具的演进Ant示例1234567891011121314151617181920212223242526&amp;lt;project name=&amp;quot;my-app&amp;quot; default=&amp;quot;dist&amp;quot; basedir=&amp;quot;.&amp;quot;&amp;gt;  &amp;lt;property name=&amp;quot;src&amp;quot; location=&amp;quot;src&amp;q">
<meta property="og:type" content="article">
<meta property="og:title" content="Gradle基础概念">
<meta property="og:url" content="http://yoursite.com/2017/03/03/Gradle基础概念/index.html">
<meta property="og:site_name" content="一念之间">
<meta property="og:description" content="自动化构建工具的演进Ant示例1234567891011121314151617181920212223242526&amp;lt;project name=&amp;quot;my-app&amp;quot; default=&amp;quot;dist&amp;quot; basedir=&amp;quot;.&amp;quot;&amp;gt;  &amp;lt;property name=&amp;quot;src&amp;quot; location=&amp;quot;src&amp;q">
<meta property="og:image" content="http://oleomvhb3.bkt.clouddn.com/gradleProject.png">
<meta property="og:image" content="http://oleomvhb3.bkt.clouddn.com/flavors_LI.png">
<meta property="og:image" content="http://oleomvhb3.bkt.clouddn.com/sign.png">
<meta property="og:updated_time" content="2017-03-03T03:27:55.592Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Gradle基础概念">
<meta name="twitter:description" content="自动化构建工具的演进Ant示例1234567891011121314151617181920212223242526&amp;lt;project name=&amp;quot;my-app&amp;quot; default=&amp;quot;dist&amp;quot; basedir=&amp;quot;.&amp;quot;&amp;gt;  &amp;lt;property name=&amp;quot;src&amp;quot; location=&amp;quot;src&amp;q">
<meta name="twitter:image" content="http://oleomvhb3.bkt.clouddn.com/gradleProject.png">
  
    <link rel="alternative" href="/atom.xml" title="一念之间" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" type="text/css" href="/./main.2d7529.css">
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  

</head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      
<div class="overlay" style="background: #4d4d4d"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="http://oleomvhb3.bkt.clouddn.com/448913170370008243.jpg" class="js-avatar">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/">言者歌途</a></h1>
		</hgroup>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/tags/随笔/">随笔</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">所有文章</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">友链</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">关于我</a>
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="#" title="github"><i class="icon-github"></i></a>
		        
					<a class="weibo" target="_blank" href="#" title="weibo"><i class="icon-weibo"></i></a>
		        
					<a class="rss" target="_blank" href="#" title="rss"><i class="icon-rss"></i></a>
		        
					<a class="zhihu" target="_blank" href="#" title="zhihu"><i class="icon-zhihu"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="http://oleomvhb3.bkt.clouddn.com/448913170370008243.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">言者歌途</h1>
			</hgroup>
			
			
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="#" title="github"><i class="icon-github"></i></a>
			        
						<a class="weibo" target="_blank" href="#" title="weibo"><i class="icon-weibo"></i></a>
			        
						<a class="rss" target="_blank" href="#" title="rss"><i class="icon-rss"></i></a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu"><i class="icon-zhihu"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 50%">
				
				
					<li style="width: 50%"><a href="/">主页</a></li>
		        
					<li style="width: 50%"><a href="/tags/随笔/">随笔</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            <article id="post-Gradle基础概念" class="article article-type-post " itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Gradle基础概念
    </h1>
  

        
        <a href="/2017/03/03/Gradle基础概念/" class="archive-article-date">
  	<time datetime="2017-03-03T03:26:54.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-03-03</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="自动化构建工具的演进"><a href="#自动化构建工具的演进" class="headerlink" title="自动化构建工具的演进"></a>自动化构建工具的演进</h1><h2 id="Ant"><a href="#Ant" class="headerlink" title="Ant"></a>Ant</h2><h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">&lt;project name=&quot;my-app&quot; default=&quot;dist&quot; basedir=&quot;.&quot;&gt;</div><div class="line">  &lt;property name=&quot;src&quot; location=&quot;src&quot; /&gt;              //全局属性，例如源代码、输出和发布目录</div><div class="line">  &lt;property name=&quot;build&quot; location=&quot;build&quot; /&gt;</div><div class="line">  &lt;property name=&quot;dist&quot; location=&quot;dist&quot; /&gt;</div><div class="line">  &lt;property name=&quot;version&quot; value=&quot;1.0&quot; /&gt;</div><div class="line">  </div><div class="line">  &lt;target name=&quot;init&quot;&gt;                               //创建由编译target使用的构建目录结构</div><div class="line">     &lt;mkdir dir=&quot;$&#123;build&#125;&quot; /&gt;</div><div class="line">  &lt;/target&gt;</div><div class="line">  </div><div class="line">  &lt;target name=&quot;compile&quot; depends=&quot;init&quot; description=&quot;compile the source&quot;&gt;</div><div class="line">     &lt;javac srcdir=&quot;$&#123;src&#125;&quot; destdir=&quot;$&#123;build&#125;&quot;       //从src目录编译源代码到build目录</div><div class="line">            classpath=&quot;lib/commons-lang3-3.1.jar&quot;</div><div class="line">            includeantruntime=&quot;false&quot; /&gt;           </div><div class="line">            </div><div class="line">  &lt;target name=&quot;dist&quot; depends=&quot;compile&quot;            </div><div class="line">          description=&quot;generate the distribution&quot;&gt;</div><div class="line">     &lt;mkdir dir=&quot;$&#123;dist&#125;:/&gt;                          //创建发布目录</div><div class="line">     &lt;jar jarfile=&quot;$&#123;dist&#125;/my-app-$&#123;version&#125;.jar&quot; basedir=&quot;$&#123;build&#125;&quot;/&gt;  //生成jar文件</div><div class="line">  &lt;/target&gt;</div><div class="line">  </div><div class="line">  &lt;target name=&quot;clean&quot; description=&quot;clean up&quot;&gt;      //删除build和dist目录树</div><div class="line">     &lt;delete dir=&quot;$&#123;build&#125;&quot; /&gt;</div><div class="line">     &lt;delete dir=&quot;$&#123;dist&#125;&quot; /&gt;</div><div class="line">  &lt;/target&gt;</div><div class="line">&lt;/project&gt;</div></pre></td></tr></table></figure>
<h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><ul>
<li>自由灵活，对于构建的结构没有强加任何限制</li>
<li>可以用Java语言编写自己的task扩展脚本功能<h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3></li>
<li>XML作为构建逻辑的定义语言过于臃肿</li>
<li>对复杂的构建逻辑支持不好。如if-then/if-then-else</li>
<li>build文件如何编写没有任何规范和约定，每个build文件可能都不一样。开发人员需要完整理解构建中的每个细节</li>
<li>Ant没有暴露API能够了解当前构建过程的详细信息</li>
<li>没有继承依赖管理系统。必须和Ivy配合使用</li>
</ul>
<h2 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h2><h3 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;</div><div class="line">         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class="line">         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0&quot;</div><div class="line">                             http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</div><div class="line">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</div><div class="line">    &lt;groupId&gt;com.mycompany.app&lt;/groupId&gt;         //定义project所属的组织</div><div class="line">    &lt;artifactId&gt;my-app&lt;/artifactId&gt; </div><div class="line">    &lt;packaging&gt;jar&lt;/packaging&gt;                   //该project所产生的工件类型</div><div class="line">    &lt;version&gt;1.0&lt;/version&gt;                       //版本号影响工件的名字</div><div class="line">    </div><div class="line">    &lt;dependencies&gt;</div><div class="line">      &lt;dependency&gt;</div><div class="line">        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;    //依赖Apache Commons Lang 3.1版本</div><div class="line">        &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;</div><div class="line">        &lt;version&gt;3.1&lt;/version&gt; </div><div class="line">        &lt;scope&gt;compile&lt;/scope&gt;                   //依赖用于编译阶段 </div><div class="line">      &lt;/dependency&gt;</div><div class="line">    &lt;/dependencies&gt;</div><div class="line">&lt;/project&gt;</div></pre></td></tr></table></figure>
<h3 id="优点-1"><a href="#优点-1" class="headerlink" title="优点"></a>优点</h3><ul>
<li>引入了默认的标准化项目布局</li>
<li>引入构建生命周期的思想</li>
<li>内置了依赖管理<h3 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h3></li>
<li>默认的结构和生命周期过于限制，不一定适合项目需求</li>
<li>扩展过于困难。需要学习Maven的内部扩展API。<h3 id="座右铭"><a href="#座右铭" class="headerlink" title="座右铭"></a>座右铭</h3>要么我的方式，要么复杂的方式</li>
</ul>
<h2 id="Gradle"><a href="#Gradle" class="headerlink" title="Gradle"></a>Gradle</h2><h3 id="特点（结合了Maven与Ant）"><a href="#特点（结合了Maven与Ant）" class="headerlink" title="特点（结合了Maven与Ant）"></a>特点（结合了Maven与Ant）</h3><ul>
<li>具有表达性、声明式、可维护的构建语言。基于Groovy的领域特定语言（DSL），而不是XML</li>
<li>标准化的项目布局和生命周期，但是具有完全的灵活性和对默认值的完全可配置性</li>
<li>拥有易用且灵活的方式去实现定制逻辑</li>
<li>支持构建由多个项目的项目结构</li>
<li>支持依赖管理</li>
<li>能很好的继承和迁移现有的构建基础设施，能够引入Ant构建脚本和可以将现有的Ant和Maven逻辑转换成其自身规则集</li>
<li>强调可扩展性和高效率的构建<h3 id="座右铭-1"><a href="#座右铭-1" class="headerlink" title="座右铭"></a>座右铭</h3>让不可能成为可能，让可能变得简单，让简单变得优雅</li>
</ul>
<h2 id="ThoughtWorks"><a href="#ThoughtWorks" class="headerlink" title="ThoughtWorks"></a>ThoughtWorks</h2><p>一个软件开发咨询公司，会周期性地发布关于新技术、语言和工具的报告，帮助软件行业的决策者理解发展趋势和他们对市场的影响。在2013年5月出版的报告中，Gradle被标记为采纳状态，说明这项技术应该被行业采纳。</p>
<h1 id="Gradle简介"><a href="#Gradle简介" class="headerlink" title="Gradle简介"></a>Gradle简介</h1><h2 id="Gradle-Wrapper"><a href="#Gradle-Wrapper" class="headerlink" title="Gradle Wrapper"></a>Gradle Wrapper</h2><ul>
<li>能够让机器在没有安装Gradle运行时的环境下运行Gradle构建</li>
<li>保证当前工程所有开发者的构建环境是一致的</li>
<li>构建工具能够被纳入版本控制系统<h3 id="2-12-AdvancedGradleWrapper"><a href="#2-12-AdvancedGradleWrapper" class="headerlink" title="2.12 AdvancedGradleWrapper"></a>2.12 AdvancedGradleWrapper</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">wrapper &#123;</div><div class="line">    gradleVersion = &apos;2.14.1&apos;</div><div class="line">&#125;</div><div class="line"></div><div class="line">$ ./gradlew tasks</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h2><ul>
<li><p>-P</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gradle -Pname=&quot;value&quot; taskName</div></pre></td></tr></table></figure>
</li>
<li><p>gradle.properties</p>
</li>
<li><p>ext块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"> ext &#123;   //project.ext(for extra properties)</div><div class="line">    name = &quot;value&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>rootProject.ext  //在top-level build file中ext块定义的属性</p>
</li>
</ul>
<h2 id="Groovy一些特性"><a href="#Groovy一些特性" class="headerlink" title="Groovy一些特性"></a>Groovy一些特性</h2><ul>
<li><p>字符串中表达式</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">def foo = &quot;a string&quot;</div><div class="line">println &quot;Let&apos;s do some math. 5 + 6 = $&#123;5 + 6&#125;&quot;</div><div class="line">println &quot;foo is now of type: $&#123;foo.class&#125; and has value: $foo&quot;</div></pre></td></tr></table></figure>
</li>
<li><p>省略括号及返回值</p>
<ul>
<li>函数至少有一个参数且无二义性则可以省略括号</li>
<li>函数最后一个表达式就是返回值</li>
</ul>
</li>
<li>类的private属性可以通过点号访问，Groovy会自动调用生成的getter和setter方法</li>
<li><p>Closure</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">def gg = &quot;I&apos;m gg&quot;</div><div class="line">def myClosure = &#123;</div><div class="line">   println &quot;from myClosure&quot;</div><div class="line">   println &quot;my value is $gg&quot;</div><div class="line">&#125;</div><div class="line"></div><div class="line">myClosure()</div><div class="line">gg = 5</div><div class="line">myClosure()</div><div class="line">def newFunc = myClosure</div><div class="line">newFunc()</div></pre></td></tr></table></figure>
</li>
<li><p>Delegate</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">def greetingClosure = &#123;</div><div class="line">  greeting = &quot;Setting the greeting from a closure&quot;</div><div class="line">  printGreeting()</div><div class="line">&#125;</div><div class="line">greetingClosure.delegate = myGroovyGreeter</div><div class="line">greetingClosure()</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Task"><a href="#Task" class="headerlink" title="Task"></a>Task</h2><p>==the entire build script delegates to a project<br>object, All the keywords in the Gradle DSL are properties of, or methods on,<br>the project object==</p>
<h3 id="声明一个task"><a href="#声明一个task" class="headerlink" title="声明一个task"></a>声明一个task</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">project.task(&quot;myTask&quot;)</div><div class="line">task(&quot;myTask&quot;) //代理给project对象</div><div class="line">task &quot;myTaks&quot; //有参数唯一性可以省略括号</div><div class="line"></div><div class="line">task myTask //a groovy object</div><div class="line">myTask.description = &quot;This is what&apos;s shown in the task list&quot;</div><div class="line">myTask.group = &quot;This is the heading for this task in the task list,&quot;</div><div class="line"></div><div class="line">/*</div><div class="line">task类最重要的属性是actions，doLast(closure)可以在actions尾部添加一个action</div><div class="line">*/</div><div class="line">myTask.doLast &#123;println &quot;Do this last&quot;&#125;</div><div class="line">myTask.doFirst &#123;println &quot;Do this first&quot;&#125;</div></pre></td></tr></table></figure>
<p>==Instead of declaring a task and then setting its properties afterwards, we can also give the task a configuration closure when it’s declared.==<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">task myTask &#123;</div><div class="line">    description &quot;Here&apos;s a task with a configuration block&quot;</div><div class="line">    group &quot;Some group&quot;</div><div class="line">    doLast &#123;</div><div class="line">        println &quot;Here&apos;s the action&quot; + &quot;$&#123;&quot;\n&quot; + description + &quot;\n&quot; + group&#125;&quot;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>here are two important things to know to understand this configuration<br>closure. The first is that when this closure is evaluated, its delegate is the<br>task object. That means when you’re assigning to <code>group</code>, you’re really<br>assigning to <code>task.group</code>. The second thing is that the properties of the task<br>object are decorated with setters with the same names. That’s how we can omit<br>equals signs when we’re to assigning to properties. We’re really calling a<br>setter and leaving off the parentheses.<br> The only gotcha is that you must include the equals sign or parentheses when<br>assigning a collection to a property.</p>
</blockquote>
<ol>
<li>myTask后面跟着的closure是代理给task的。</li>
<li>task的对象的属性会被和属性同名的方法装饰，所以可以省略=号</li>
<li>集合赋给某个属性时，不能省略=号以及括号</li>
</ol>
<p><a href="http://stackoverflow.com/questions/27584463/understing-the-groovy-syntax-in-a-gradle-task-definition" target="_blank" rel="external">AST</a></p>
<h3 id="Default-Task设置"><a href="#Default-Task设置" class="headerlink" title="Default Task设置"></a>Default Task设置</h3><ul>
<li>默认的default task是help</li>
<li>设置default tasks<ul>
<li>defaultTasks ‘clean’, ‘assembleDebug’   //top-level build.gradle file</li>
</ul>
</li>
</ul>
<h3 id="DAG依赖-Directed-Acyclic-Graph"><a href="#DAG依赖-Directed-Acyclic-Graph" class="headerlink" title="DAG依赖 Directed Acyclic Graph"></a>DAG依赖 Directed Acyclic Graph</h3><p>To simplify the build process, the build tools create a dynamic model of the workflow as a Directed Acyclic Graph (DAG). </p>
<ul>
<li>dependsOn<ul>
<li>执行该task之前，所依赖的task会执行一遍</li>
</ul>
</li>
<li>finallizedBy<ul>
<li>执行完该task之后，所尾随的task会执行一遍</li>
</ul>
</li>
<li>mustRunAfter<ul>
<li>如果和其他task共同执行，那么必须在指定task的后面才能执行</li>
</ul>
</li>
</ul>
<h3 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h3><p>A Gradle build has three phases: </p>
<ul>
<li><strong>Initialization</strong>: This is where the Project instance is created. If there are multiple modules, each with their own build.gradle file, multiple projects will be created. </li>
<li><strong>Configuration</strong>: In this phase, the build scripts are executed, creating and configuring all the tasks for every project object. </li>
<li><strong>Execution</strong>: This is the phase where Gradle determines which tasks should be executed. Which tasks should be executed depends on the arguments passed for starting the build and what the current directory is. <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">task test &#123;</div><div class="line">    doLast &#123;</div><div class="line">        println &quot;1: I&apos;m in ur action&quot;</div><div class="line">    &#125;</div><div class="line">    println &quot;2: I&apos;m in ur configuration closure&quot;</div><div class="line">&#125;</div><div class="line">println &quot;3: I&apos;m in ur build script&quot;</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>2: I’m in ur configuration closure</li>
<li>3: I’m in ur build script</li>
<li>1: I’m in ur action<br>==如果将println 3 移到最上面，则输出变成3,2,1==<br><strong>即从上往下的顺序执行，如果是语句则直接执行，如果是task则只执行Congifuration部分。最后执行task的action部分。</strong></li>
</ul>
<h3 id="增量构建"><a href="#增量构建" class="headerlink" title="增量构建"></a>增量构建</h3><p>tasks that are marked UP-TO-DATE are skipped by Gradle because it has been<br>determined that no work needed to be done.</p>
<p><img src="http://oleomvhb3.bkt.clouddn.com/gradleProject.png" alt="Project Snapshot"></p>
<h3 id="内置Task的一些使用示例"><a href="#内置Task的一些使用示例" class="headerlink" title="内置Task的一些使用示例"></a>内置Task的一些使用示例</h3><ul>
<li><p>copy</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">task copyImageFolders(type: Copy) &#123;</div><div class="line">    from(&apos;images&apos;) &#123;</div><div class="line">        include &apos;*.jpg&apos;</div><div class="line">        into &apos;jpeg&apos;  // build/jpeg</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    from(&apos;images&apos;) &#123;</div><div class="line">        include &apos;*.gif&apos;</div><div class="line">        into &apos;gif&apos;  // build/gif</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    into &apos;build&apos;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>压缩</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">task zipImageFolders(type: Zip) &#123;</div><div class="line">    baseName = &apos;images&apos;</div><div class="line">    destinationDir = file(&apos;build&apos;)</div><div class="line"></div><div class="line">    from(&apos;images&apos;) &#123;</div><div class="line">        include &apos;*.jpg&apos;</div><div class="line">        into &apos;jpeg&apos;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    from(&apos;images&apos;) &#123;</div><div class="line">        include &apos;*.gif&apos;</div><div class="line">        into &apos;gif&apos;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>解压缩</p>
</li>
<li>HINT:<a href="https://docs.gradle.org/current/dsl/org.gradle.api.Project.html#org.gradle.api.Project:zipTree(java.lang.Object" target="_blank" rel="external">https://docs.gradle.org/current/dsl/org.gradle.api.Project.html#org.gradle.api.Project:zipTree(java.lang.Object</a>)<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">task unpackBundle(type: Copy, dependsOn: bundleWeb) &#123;</div><div class="line">    from zipTree(&apos;build/web.zip&apos;)</div><div class="line">    into &apos;build/exploded&apos;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="自定义task类型"><a href="#自定义task类型" class="headerlink" title="自定义task类型"></a>自定义task类型</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">class HelloNameTask extends DefaultTask &#123;</div><div class="line">    String firstName</div><div class="line"></div><div class="line">    @TaskAction</div><div class="line">    void doAction() &#123;</div><div class="line">        println &quot;Hello, $firstName&quot;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">task helloName(type: HelloNameTask) &#123;</div><div class="line">    firstName = &apos;Jeremy&apos;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Dry-run"><a href="#Dry-run" class="headerlink" title="Dry run"></a>Dry run</h3><blockquote>
<p> It is possible to do a dry run of tasks, which prints out all the steps that are executed when running a specific task. This dry run will not actually perform any of these steps, so it is a safe way to see what you can expect to happen when running a certain task. You can do a dry run by adding the parameters -m or –dry-run. </p>
</blockquote>
<h2 id="Java-Plugin"><a href="#Java-Plugin" class="headerlink" title="Java Plugin"></a>Java Plugin</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apply plugin: &quot;java&quot;</div></pre></td></tr></table></figure>
<ul>
<li>assemble</li>
<li>check</li>
<li>build</li>
<li>clean</li>
</ul>
<h3 id="相关文档地址"><a href="#相关文档地址" class="headerlink" title="相关文档地址"></a>相关文档地址</h3><ul>
<li><a href="https://docs.gradle.org/current/userguide/tutorial_java_projects.html" target="_blank" rel="external">Gradle Java Quickstart guide</a>  </li>
<li><a href="https://docs.gradle.org/current/userguide/java_plugin.html" target="_blank" rel="external">java_plugin</a>  </li>
<li><a href="https://docs.gradle.org/current/dsl/org.gradle.api.tasks.JavaExec.html" target="_blank" rel="external">DSL JavExec</a><h3 id="执行java方法"><a href="#执行java方法" class="headerlink" title="执行java方法"></a>执行java方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">task execute(type: JavaExec) &#123;</div><div class="line">    main = &quot;com.udacity.gradle.Person&quot;</div><div class="line">    // We&apos;ll talk about this shortly</div><div class="line">    classpath = sourceSets.main.runtimeClasspath</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="manifest中添加属性以及-main-source中添加java目录"><a href="#manifest中添加属性以及-main-source中添加java目录" class="headerlink" title="manifest中添加属性以及 main source中添加java目录"></a>manifest中添加属性以及 main source中添加java目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">apply plugin: &apos;java&apos;</div><div class="line"></div><div class="line"></div><div class="line">jar &#123;</div><div class="line">    manifest &#123;</div><div class="line">        attributes &apos;Implementation-Version&apos; : &apos;1.0&apos;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">sourceSets &#123;</div><div class="line">   main &#123;</div><div class="line">      java &#123;</div><div class="line">        srcDir &apos;java&apos;</div><div class="line">      &#125;</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="具体步骤"><a href="#具体步骤" class="headerlink" title="具体步骤"></a>具体步骤</h3><blockquote>
<ol>
<li>Modify the ‘jar’ task to add a manifest attribute named<br>‘Implementation-Version’ with a value of ‘1.0’.</li>
<li>Configure the main source set so that it includes the ‘java’ directory<br>as an additional source directory.</li>
</ol>
</blockquote>
<h4 id="manifest中添加属性"><a href="#manifest中添加属性" class="headerlink" title="manifest中添加属性"></a>manifest中添加属性</h4><ol>
<li>访问<a href="https://docs.gradle.org/current/dsl/org.gradle.api.tasks.bundling.Jar.html" target="_blank" rel="external">jar Mainifest</a> </li>
<li>发现jar的manifest属性是<a href="https://docs.gradle.org/current/javadoc/org/gradle/api/java/archives/Manifest.html" target="_blank" rel="external">Manifest</a>类型。</li>
<li>Manifest有attributes方法，接受map为参数</li>
</ol>
<blockquote>
<p>Adds content to the main attributes of the manifest.</p>
<p>attributes - The values to add to the main attributes. The values can be any object. For evaluating the value objects their Object.toString() method is used. This is done lazily either before writing or when getEffectiveManifest() is called.</p>
</blockquote>
<h4 id="main-source中添加java目录"><a href="#main-source中添加java目录" class="headerlink" title="main source中添加java目录"></a>main source中添加java目录</h4><ol>
<li>访问<a href="https://docs.gradle.org/current/userguide/java_plugin.html#sec:source_sets" target="_blank" rel="external">Source Sets</a>  </li>
<li>参照47.7节Working with source Sets一节</li>
<li><p>查到SourceSets是Project的属性，其类型为SourceSetContainer</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">println sourceSets.main.output.classesDir</div><div class="line">println sourceSets[&apos;main&apos;].output.classesDir</div><div class="line">sourceSets.all &#123;</div><div class="line"> println name</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>sourceSets.all打印出main和test</p>
</li>
<li>47.7.1列出了SourceSet的属性并给出了<a href="https://docs.gradle.org/current/dsl/org.gradle.api.tasks.SourceSet.html" target="_blank" rel="external">SourceSet</a>的链接，其java属性如下<blockquote>
<p>The Java source files of this source set. Contains only .java files found in the Java source directories, and excludes all other files.</p>
</blockquote>
</li>
<li>可见Java是个<a href="https://docs.gradle.org/current/javadoc/org/gradle/api/file/SourceDirectorySet.html" target="_blank" rel="external">SourceDirectorySet</a>类型，其包含srcDir方法。<blockquote>
<p>Adds the given source directory to this set. The given directory does not need to exist. Directories that do not exist are ignored.</p>
</blockquote>
</li>
</ol>
<h2 id="依赖管理"><a href="#依赖管理" class="headerlink" title="依赖管理"></a>依赖管理</h2><h3 id="Repository"><a href="#Repository" class="headerlink" title="Repository"></a>Repository</h3><p>Preconfigured repositories<br>Three Maven repositories</p>
<ul>
<li>JCenter</li>
<li>Maven Central</li>
<li>local Maven repository</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">repositories &#123; </div><div class="line">    mavenCentral()  //预置的仓库 Maven Central</div><div class="line">    jcenter()       //预置的仓库 JCenter （安卓默认，Maven Central的超集，支持Https）</div><div class="line">    mavenLocal()    //预置的仓库 local Maven Repository （本地缓存。默认目录windows是%UserProfile%\.m2 Mac是~/.m2）</div><div class="line">    </div><div class="line">    maven &#123;         //第三方maven仓库</div><div class="line">       url &quot;http://repo.acmecorp.com/maven2&quot;  </div><div class="line">       [TAG:TODO] credential</div><div class="line">    &#125;</div><div class="line">    ivy &#123;           //第三方ivy仓库</div><div class="line">       url &quot;http://repo.acmecorp.com/repo&quot;   </div><div class="line">       credentials &#123;</div><div class="line">            username &apos;user&apos;</div><div class="line">            password &apos;secret&apos;</div><div class="line">        &#125;</div><div class="line">    &#125; </div><div class="line">     maven &#123;       //Maven本地仓库</div><div class="line">        url &quot;../repo&quot;  </div><div class="line">    &#125;</div><div class="line">    flatDir &#123;     //本地仓库</div><div class="line">        dirs &apos;aars&apos;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Native-libraries"><a href="#Native-libraries" class="headerlink" title="Native libraries"></a>Native libraries</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">app </div><div class="line">├── AndroidManifest.xml </div><div class="line">└── jniLibs   </div><div class="line">    ├── armeabi  </div><div class="line">    │   └── nativelib.so  </div><div class="line">    ├── armeabi-v7a  </div><div class="line">    │   └── nativelib.so  </div><div class="line">    ├── mips  </div><div class="line">    │   └── nativelib.so </div><div class="line">    └── x86      </div><div class="line">        └── nativelib.so</div></pre></td></tr></table></figure>
<h3 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">dependencies &#123; </div><div class="line">    compile files(&apos;libs/domoarigato.jar&apos;) </div><div class="line">&#125; </div><div class="line"></div><div class="line">dependencies &#123;  </div><div class="line">    compile fileTree(&apos;libs&apos;) </div><div class="line">&#125;</div><div class="line">dependencies &#123;</div><div class="line">    compile fileTree(dir: &apos;libs&apos;, include: [&apos;*.jar&apos;]) </div><div class="line">&#125; </div><div class="line">dependencies &#123;   </div><div class="line">    compile(name:&apos;libraryname&apos;, ext:&apos;aar&apos;) </div><div class="line">&#125; </div><div class="line">dependencies &#123;   </div><div class="line">    compile project(&apos;:moduleName&apos;) </div><div class="line">&#125; </div><div class="line"></div><div class="line">dependencies &#123; </div><div class="line">   compile &apos;com.android.support:support-v4:22.2.+&apos;   //最新的patch</div><div class="line">   compile &apos;com.android.support:appcompat-v7:22.2+&apos;  //此版本号大于2的最新版本</div><div class="line">   compile &apos;com.android.support:recyclerview-v7:+&apos;  //最新版本</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="查看依赖"><a href="#查看依赖" class="headerlink" title="查看依赖"></a>查看依赖</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ gradle dependencies</div><div class="line"></div><div class="line">$ gradle dependencyInsight --dependency commons-logging</div></pre></td></tr></table></figure>
<h3 id="Dependency-concepts"><a href="#Dependency-concepts" class="headerlink" title="Dependency concepts"></a>Dependency concepts</h3><h4 id="compile"><a href="#compile" class="headerlink" title="compile"></a>compile</h4><ul>
<li>default</li>
<li>add to the classpath</li>
<li>add to the generated APK<h4 id="apk"><a href="#apk" class="headerlink" title="apk"></a>apk</h4></li>
<li>only be added to the package</li>
<li>not added to the compilation classpath</li>
<li>only take JAR dependencies<h4 id="provided"><a href="#provided" class="headerlink" title="provided"></a>provided</h4></li>
<li>will not be packaged</li>
<li>added to the compilation classpath</li>
<li>only take JAR dependencies<h4 id="testCompile"><a href="#testCompile" class="headerlink" title="testCompile"></a>testCompile</h4><h4 id="androidTestCompile"><a href="#androidTestCompile" class="headerlink" title="androidTestCompile"></a>androidTestCompile</h4></li>
<li>extra libraries specifically for testing</li>
<li>included in the test apk, not in the release apk</li>
</ul>
<h2 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h2><blockquote>
<p>In order to  be able to compile the code, you need to add the SDK to your compile classpath.  You do not need to include the SDK in your APK though, because it is already  on the device. This is where dependency configurations come in. </p>
<p>Gradle groups dependencies into configurations<br>==the Android plugin also generates configurations for every build variant==</p>
</blockquote>
<h3 id="内置Configuration"><a href="#内置Configuration" class="headerlink" title="内置Configuration"></a>内置Configuration</h3><ul>
<li>compile</li>
<li>runtime</li>
<li>testCompile<ul>
<li>exntends from ‘compile’ configuration</li>
</ul>
</li>
<li>testRuntime<ul>
<li>extends from ‘runtime’ configuration</li>
</ul>
</li>
</ul>
<h3 id="SpecificDependencies"><a href="#SpecificDependencies" class="headerlink" title="SpecificDependencies"></a>SpecificDependencies</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">debugCompile &apos;com.squareup.leakcanary:leakcanary-android:1.5&apos;</div><div class="line">releaseCompile &apos;com.squareup.leakcanary:leakcanary-android-no-op:1.5&apos;</div><div class="line">androidTestCompile &apos;com.android.support.test:runner:0.4&apos;</div></pre></td></tr></table></figure>
<h3 id="自定义Configuration"><a href="#自定义Configuration" class="headerlink" title="自定义Configuration"></a>自定义Configuration</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">configurations &#123;</div><div class="line">    println &apos;configurations class is &apos; + it.class   //DefaultConfigurationContainer_Decorated</div><div class="line">    custom &#123;</div><div class="line">        description &apos;I am a customed configuration&apos;</div><div class="line">        println &apos;custom class is &apos; + it.class  //DefaultConfiguration_Decorated</div><div class="line">        transitive = false</div><div class="line">    &#125;</div><div class="line">    compile.extendsFrom custom</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ol>
<li><p><a href="https://docs.gradle.org/current/dsl/org.gradle.api.Project.html#org.gradle.api.Project:configurations(groovy.lang.Closure" target="_blank" rel="external">configurations</a>) {}</p>
<blockquote>
<p>This method executes the given closure against the ConfigurationContainer for this project. The ConfigurationContainer is passed to the closure as the closure’s delegate.</p>
</blockquote>
</li>
<li><p><a href="https://docs.gradle.org/current/dsl/org.gradle.api.artifacts.ConfigurationContainer.html" target="_blank" rel="external">CongifurationContainer</a></p>
<blockquote>
<p>A ==dynamic== method is added for each configuration which takes a configuration closure. ==This is equivalent to calling ConfigurationContainer.getByName(java.lang.String, groovy.lang.Closure)==. For example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">configurations.create(&apos;myConfiguration&apos;)</div><div class="line">configurations.myConfiguration &#123;</div><div class="line">    transitive = false</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">dependencies &#123;</div><div class="line">    println &apos;dependencies class is &apos; + it.class //DefaultDependencyHandler_Decorated</div><div class="line">    custom &apos;com.google.guava:guava:18.0&apos;</div><div class="line">  //  这里估计custom也是动态增加的方法</div><div class="line">    custom(group:&apos;com.google.guava&apos;, name: &apos;guava&apos;, version:&apos;18.0&apos;) &#123;</div><div class="line">        println &apos;custom dependency class is &apos; + it.class  //DefaultExternalModuleDependency_Decorated</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>Configurations are really just fancy file collections and can be used anywhere<br>a file collection can be used, such as in Copy tasks. This is useful if we<br>want to download some dependencies from a remote repository and bundle them in<br>our project somehow.</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">task copyDependencies(type: Copy) &#123;</div><div class="line">    from configurations.custom</div><div class="line">    into &apos;build/libs&apos;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Build-Variant"><a href="#Build-Variant" class="headerlink" title="Build Variant"></a>Build Variant</h2><p>build types和product flavors的结合</p>
<p>假设有red和color两个productFlavor，debug和release两个build type</p>
<ul>
<li>assembleBlue<ul>
<li>相当于执行assembleBlueRelease和assembleBlueDebug</li>
</ul>
</li>
<li>assembleDebug<ul>
<li>相当于执行assembleBlueDebug和assembleRedDebug</li>
</ul>
</li>
<li>assembleBlueDebug<ul>
<li>flavor settings override the build type settings</li>
</ul>
</li>
</ul>
<h3 id="Build-Type"><a href="#Build-Type" class="headerlink" title="Build Type"></a>Build Type</h3><h4 id="BuildConfig-and-resources"><a href="#BuildConfig-and-resources" class="headerlink" title="BuildConfig and resources"></a>BuildConfig and resources</h4><blockquote>
<p>Ever since SDK tools revision 17, the build tools generate a class called BuildConfig, which contains a DEBUG constant that is set according to the build type. This is useful if you have code that you only want to run when debugging, such as logging. It is possible through Gradle to extend that file so that you can have constants that contain different values in debug and release. </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">android &#123; </div><div class="line">    buildTypes &#123;   </div><div class="line">        debug &#123;</div><div class="line">            buildConfigField &quot;String&quot;, &quot;API_URL&quot;,  </div><div class="line">            &quot;\&quot;http://test.example.com/api\&quot;&quot;           </div><div class="line">            buildConfigField &quot;boolean&quot;, &quot;LOG_HTTP_CALLS&quot;, &quot;true&quot;  </div><div class="line">            resValue &quot;string&quot;, &quot;app_name&quot;, &quot;Example DEBUG&quot; </div><div class="line">        &#125;</div><div class="line">        release &#123; </div><div class="line">            buildConfigField &quot;String&quot;, &quot;API_URL&quot;,               </div><div class="line">            &quot;\&quot;http://example.com/api\&quot;&quot;            //这里双引号转义是需要的</div><div class="line">            buildConfigField &quot;boolean&quot;, &quot;LOG_HTTP_CALLS&quot;, &quot;false&quot;</div><div class="line">            resValue &quot;string&quot;, &quot;app_name&quot;, &quot;Example&quot;  //这里不需要双引号转移是因为value=&quot;&quot;已经有双引号了</div><div class="line">        &#125;   </div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Product-flavors"><a href="#Product-flavors" class="headerlink" title="Product flavors"></a>Product flavors</h3><blockquote>
<p>As opposed to build types, which are used to configure several different builds of the same app or library, product flavors are used to create different versions of the same app.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">productFlavors &#123;</div><div class="line">    free &#123;</div><div class="line">        applicationId &quot;com.gradle.buildflavors.free&quot;</div><div class="line">    &#125;</div><div class="line">    paid &#123;</div><div class="line">        applicationId &quot;com.gradle.buildflavors.paid&quot;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="ApplicationId"><a href="#ApplicationId" class="headerlink" title="ApplicationId"></a>ApplicationId</h4><blockquote>
<p>The first property in this block is applicationId. This overrides the package name from the manifest file, but there are some differences between applicationId and the package name. </p>
<p> Before Gradle was used as the default Android build system, the package name in AndroidManifest.xml had two purposes: it served as the unique identifier of an app, and it was used as the name for the package in the R resource class. </p>
<p> Android Tools team has decoupled these two different usages of package name. The package, as defined in the manifest file, continues to be used in your source code and your R class, while the package name that is used by the device and Google Play as the unique identifier is now referred to as application id. </p>
</blockquote>
<h4 id="Multiflavor-variants"><a href="#Multiflavor-variants" class="headerlink" title="Multiflavor variants"></a>Multiflavor variants</h4><p>场景：</p>
<ul>
<li>A需要free和pay版本，用A的商标。B需要free和pay的版本，用B的商标。</li>
<li>普通的方式需要新建freeIconA, freeIconB, payIconA, payIconB四个productFlavor</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">android &#123;    </div><div class="line">    flavorDimensions &quot;color&quot;, &quot;price&quot;  //顺序决定了build variant的名字和资源覆盖的逻辑</div><div class="line">    </div><div class="line">    productFlavors &#123;     </div><div class="line">        red &#123;       </div><div class="line">            flavorDimension &quot;color&quot;    </div><div class="line">        &#125;</div><div class="line">        blue &#123;  </div><div class="line">            flavorDimension &quot;color&quot;  </div><div class="line">        &#125;</div><div class="line">        free &#123;</div><div class="line">            flavorDimension &quot;price&quot;       </div><div class="line">        &#125;</div><div class="line">        paid &#123;</div><div class="line">            flavorDimension &quot;price&quot;       </div><div class="line">        &#125;</div><div class="line">    &#125; </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="如何在Build-Type和Product-Flavor中进行选择"><a href="#如何在Build-Type和Product-Flavor中进行选择" class="headerlink" title="如何在Build Type和Product Flavor中进行选择"></a>如何在Build Type和Product Flavor中进行选择</h3><blockquote>
<p>If you are unsure whether you need a new build type, or a new product flavor, you should ask yourself if you want to create a new build of the same app for internal use, or a new APK to publish to Google Play. If you need an entirely new app that needs to be published separately from what you already have, then product flavors are the way to go. Otherwise, you should stick to using build types. </p>
</blockquote>
<h3 id="SourceSets"><a href="#SourceSets" class="headerlink" title="SourceSets"></a>SourceSets</h3><ul>
<li>the flavor name followed by the build type name.</li>
<li>The components of the combined folder will have a higher priority than the components from both the build type folder and the product flavor folder.</li>
</ul>
<ul>
<li>如果在某个SourceSet中定义了Java class。那么就不能在sourceSets.main中定义该类</li>
<li>drawables and layouts会覆盖sourceSets.main中的</li>
<li>values文件夹中的资源会和sourceSets.main中的合并，相同的则覆盖</li>
<li>manifest文件也和values一样的规则</li>
</ul>
<p><img src="http://oleomvhb3.bkt.clouddn.com/flavors_LI.png" alt="Flavors"></p>
<h2 id="Sign-Configuration"><a href="#Sign-Configuration" class="headerlink" title="Sign Configuration"></a>Sign Configuration</h2><p><img src="http://oleomvhb3.bkt.clouddn.com/sign.png" alt="SignConfig"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">signingConfigs &#123;</div><div class="line">      config &#123;</div><div class="line">          keyAlias &apos;udacity&apos;</div><div class="line">          keyPassword &apos;password&apos;</div><div class="line">          storeFile file(&quot;$rootDir/keystore.jks&quot;)</div><div class="line">          storePassword &apos;password&apos;</div><div class="line">      &#125;</div><div class="line">  &#125;</div><div class="line">    </div><div class="line">buildTypes &#123;</div><div class="line">      release &#123;</div><div class="line">          minifyEnabled false</div><div class="line">          proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), proguard-rules.pro&apos;</div><div class="line">          signingConfig signingConfigs.config</div><div class="line">      &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<h2 id="爱玩示例"><a href="#爱玩示例" class="headerlink" title="爱玩示例"></a>爱玩示例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">signingConfigs &#123; //gradle assembleRelease</div><div class="line">        release &#123;</div><div class="line">            storeFile file(&quot;android.keystore&quot;)</div><div class="line">            storePassword keystorePassword</div><div class="line">            keyAlias &quot;iplay_android&quot;</div><div class="line">            keyPassword keystorePassword</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        google &#123;</div><div class="line">            storeFile file(&quot;google.keystore&quot;)</div><div class="line">            storePassword keystorePassword</div><div class="line">            keyAlias &quot;iplay_google&quot;</div><div class="line">            keyPassword keystorePassword</div><div class="line">        &#125;</div><div class="line">    &#125;    </div><div class="line">    </div><div class="line">productFlavors &#123;</div><div class="line">   productFlavors.all &#123; flavor -&gt;</div><div class="line">            flavor.manifestPlaceholders = [CHANNEL_VALUE: name]</div><div class="line">            if (flavor.name.equals(&quot;google&quot;)) &#123;</div><div class="line">                flavor.signingConfig = signingConfigs.google</div><div class="line">            &#125; else &#123;</div><div class="line">                flavor.signingConfig = signingConfigs.release</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">android.applicationVariants.all &#123; variant -&gt;</div><div class="line">        for (flavor in variant.productFlavors) &#123;</div><div class="line">            def file = variant.outputs[0].outputFile</div><div class="line">            variant.outputs[0].outputFile = new File(file.parent, applicationId + &quot;-&quot; + defaultConfig.versionName + &quot;-&quot; + flavor.name + &quot;.apk&quot;);</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125; </div><div class="line">    </div><div class="line">configurations &#123;</div><div class="line">    all*.exclude group: &apos;com.squareup.okhttp3&apos;, module: &apos;okhttp&apos;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">app</div><div class="line"> |--src  </div><div class="line">     |--main  </div><div class="line">     |    |--res</div><div class="line">     |    |--drawable</div><div class="line">     |    |--yw_1222_0335.jpg</div><div class="line">     |</div><div class="line">     |--google</div><div class="line">     |    |--res</div><div class="line">     |    |--drawable</div><div class="line">     |    |--yw_1222_0335.jpg</div><div class="line">     |</div><div class="line">     |--googleDebug</div><div class="line">     |--googleRelease</div></pre></td></tr></table></figure>
<h1 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h1><h5 id="Changing-the-Android-Studio-terminal"><a href="#Changing-the-Android-Studio-terminal" class="headerlink" title="Changing the Android Studio terminal"></a>Changing the Android Studio terminal</h5><blockquote>
<p>It is possible to configure the terminal inside Android Studio to use a different shell. On Microsoft Windows, for example, the terminal defaults to Command Prompt. If you prefer to use the Git Bash (or any other shell) instead, open the Android Studio settings (under File and Settings) and look for Terminal. There you can change the shell path. For Git Bash on Microsoft Windows, it looks like this: C:\Program Files (x86)\Git\bin\sh.exe –login -i.</p>
</blockquote>

      

      
        <div class="page-reward">
          <a href="javascript:;" class="page-reward-btn tooltip-top">
            <div class="tooltip tooltip-east">
            <span class="tooltip-item">
              赏
            </span>
            <span class="tooltip-content">
              <span class="tooltip-text">
                <span class="tooltip-inner">
                  <p class="reward-p"><i class="icon icon-quo-left"></i>谢谢你请我吃糖果<i class="icon icon-quo-right"></i></p>
                  <div class="reward-box">
                    
                    
                  </div>
                </span>
              </span>
            </span>
          </div>
          </a>
        </div>
      
    </div>
    <div class="article-info article-info-index">
      
      
      

      

      
        
<div class="share-btn share-icons tooltip-left">
  <div class="tooltip tooltip-east">
    <span class="tooltip-item">
      <a href="javascript:;" class="share-sns share-outer">
        <i class="icon icon-share"></i>
      </a>
    </span>
    <span class="tooltip-content">
      <div class="share-wrap">
        <div class="share-icons">
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="icon icon-weibo"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="icon icon-weixin"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="icon icon-qq"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="icon icon-douban"></i>
          </a>
          <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a>
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="icon icon-facebook"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="icon icon-twitter"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="icon icon-google"></i>
          </a>
        </div>
      </div>
    </span>
  </div>
</div>

<div class="page-modal wx-share js-wx-box">
    <a class="close js-modal-close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="http://s.jiathis.com/qrcode.php?url=http://yoursite.com/2017/03/03/Gradle基础概念/" alt="微信分享二维码">
    </div>
</div>

<div class="mask js-mask"></div>
      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

  
<nav id="article-nav">
  
  
    <a href="/2017/02/15/MarkDown示例/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">MarkDown测试</div>
      <i class="icon-circle-right"></i>
    </a>
  
</nav>






  
    <div class="duoshuo"></div>
  




          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2017 言者歌途
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		mathjax: false,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true,
		showTags: false
	}
</script>

<script>!function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="./",n(0)}([function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var e=/\/|index.html/g;return t.replace(e,"")===n.replace(e,"")}function i(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,e=0,r=t.length;e<r;e++){var i=t[e];o(n,i.getAttribute("href"))&&(0,d.default)(i,"active")}}function u(t){for(var n=t.offsetLeft,e=t.offsetParent;null!==e;)n+=e.offsetLeft,e=e.offsetParent;return n}function f(t){for(var n=t.offsetTop,e=t.offsetParent;null!==e;)n+=e.offsetTop,e=e.offsetParent;return n}function c(t,n,e,r,o){var i=u(t),c=f(t)-n;if(c-e<=o){var a=t.$newDom;a||(a=t.cloneNode(!0),(0,h.default)(t,a),t.$newDom=a,a.style.position="fixed",a.style.top=(e||c)+"px",a.style.left=i+"px",a.style.zIndex=r||2,a.style.width="100%",a.style.color="#fff"),a.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var s=t.$newDom;s&&(s.style.visibility="hidden")}}function a(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");c(t,document.body.scrollTop,-63,2,0),c(n,document.body.scrollTop,1,3,0)}function s(){document.querySelector("#container").addEventListener("scroll",function(t){a()}),window.addEventListener("scroll",function(t){a()}),a()}function l(){x.default.versions.mobile&&window.screen.width<800&&(i(),s())}var p=e(71),d=r(p),v=e(72),y=(r(v),e(84)),h=r(y),b=e(69),x=r(b),m=e(75),g=r(m),w=e(70);l(),(0,w.addLoadEvent)(function(){g.default.init()}),t.exports={}},function(t,n){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t,n){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},function(t,n,e){var r=e(49),o=e(15);t.exports=function(t){return r(o(t))}},function(t,n,e){t.exports=!e(8)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,e){var r=e(6),o=e(12);t.exports=e(4)?function(t,n,e){return r.f(t,n,o(1,e))}:function(t,n,e){return t[n]=e,t}},function(t,n,e){var r=e(10),o=e(30),i=e(24),u=Object.defineProperty;n.f=e(4)?Object.defineProperty:function(t,n,e){if(r(t),n=i(n,!0),r(e),o)try{return u(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},function(t,n,e){var r=e(22)("wks"),o=e(13),i=e(1).Symbol,u="function"==typeof i,f=t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)("Symbol."+t))};f.store=r},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,e){var r=e(35),o=e(16);t.exports=Object.keys||function(t){return r(t,o)}},function(t,n,e){var r=e(11);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var e=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+r).toString(36))}},function(t,n){var e=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=e)},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){t.exports=!0},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,e){var r=e(6).f,o=e(2),i=e(7)("toStringTag");t.exports=function(t,n,e){t&&!o(t=e?t:t.prototype,i)&&r(t,i,{configurable:!0,value:n})}},function(t,n,e){var r=e(22)("keys"),o=e(13);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,n,e){var r=e(1),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,n){var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},function(t,n,e){var r=e(11);t.exports=function(t,n){if(!r(t))return t;var e,o;if(n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;if("function"==typeof(e=t.valueOf)&&!r(o=e.call(t)))return o;if(!n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,n,e){var r=e(1),o=e(14),i=e(18),u=e(26),f=e(6).f;t.exports=function(t){var n=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in n||f(n,t,{value:u.f(t)})}},function(t,n,e){n.f=e(7)},function(t,n,e){var r=e(1),o=e(14),i=e(46),u=e(5),f="prototype",c=function(t,n,e){var a,s,l,p=t&c.F,d=t&c.G,v=t&c.S,y=t&c.P,h=t&c.B,b=t&c.W,x=d?o:o[n]||(o[n]={}),m=x[f],g=d?r:v?r[n]:(r[n]||{})[f];d&&(e=n);for(a in e)s=!p&&g&&void 0!==g[a],s&&a in x||(l=s?g[a]:e[a],x[a]=d&&"function"!=typeof g[a]?e[a]:h&&s?i(l,r):b&&g[a]==l?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n[f]=t[f],n}(l):y&&"function"==typeof l?i(Function.call,l):l,y&&((x.virtual||(x.virtual={}))[a]=l,t&c.R&&m&&!m[a]&&u(m,a,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,n){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t,n,e){var r=e(11),o=e(1).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,n,e){t.exports=!e(4)&&!e(8)(function(){return 7!=Object.defineProperty(e(29)("div"),"a",{get:function(){return 7}}).a})},function(t,n,e){"use strict";var r=e(18),o=e(27),i=e(36),u=e(5),f=e(2),c=e(17),a=e(51),s=e(20),l=e(58),p=e(7)("iterator"),d=!([].keys&&"next"in[].keys()),v="@@iterator",y="keys",h="values",b=function(){return this};t.exports=function(t,n,e,x,m,g,w){a(e,n,x);var O,S,_,j=function(t){if(!d&&t in A)return A[t];switch(t){case y:return function(){return new e(this,t)};case h:return function(){return new e(this,t)}}return function(){return new e(this,t)}},P=n+" Iterator",E=m==h,M=!1,A=t.prototype,T=A[p]||A[v]||m&&A[m],L=T||j(m),N=m?E?j("entries"):L:void 0,C="Array"==n?A.entries||T:T;if(C&&(_=l(C.call(new t)),_!==Object.prototype&&(s(_,P,!0),r||f(_,p)||u(_,p,b))),E&&T&&T.name!==h&&(M=!0,L=function(){return T.call(this)}),r&&!w||!d&&!M&&A[p]||u(A,p,L),c[n]=L,c[P]=b,m)if(O={values:E?L:j(h),keys:g?L:j(y),entries:N},w)for(S in O)S in A||i(A,S,O[S]);else o(o.P+o.F*(d||M),n,O);return O}},function(t,n,e){var r=e(10),o=e(55),i=e(16),u=e(21)("IE_PROTO"),f=function(){},c="prototype",a=function(){var t,n=e(29)("iframe"),r=i.length,o="<",u=">";for(n.style.display="none",e(48).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(o+"script"+u+"document.F=Object"+o+"/script"+u),t.close(),a=t.F;r--;)delete a[c][i[r]];return a()};t.exports=Object.create||function(t,n){var e;return null!==t?(f[c]=r(t),e=new f,f[c]=null,e[u]=t):e=a(),void 0===n?e:o(e,n)}},function(t,n,e){var r=e(35),o=e(16).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,e){var r=e(2),o=e(3),i=e(45)(!1),u=e(21)("IE_PROTO");t.exports=function(t,n){var e,f=o(t),c=0,a=[];for(e in f)e!=u&&r(f,e)&&a.push(e);for(;n.length>c;)r(f,e=n[c++])&&(~i(a,e)||a.push(e));return a}},function(t,n,e){t.exports=e(5)},function(t,n,e){var r=e(15);t.exports=function(t){return Object(r(t))}},function(t,n,e){t.exports={default:e(41),__esModule:!0}},function(t,n,e){t.exports={default:e(42),__esModule:!0}},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var o=e(39),i=r(o),u=e(38),f=r(u),c="function"==typeof f.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":typeof t};n.default="function"==typeof f.default&&"symbol"===c(i.default)?function(t){return"undefined"==typeof t?"undefined":c(t)}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":"undefined"==typeof t?"undefined":c(t)}},function(t,n,e){e(65),e(63),e(66),e(67),t.exports=e(14).Symbol},function(t,n,e){e(64),e(68),t.exports=e(26).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,e){var r=e(3),o=e(61),i=e(60);t.exports=function(t){return function(n,e,u){var f,c=r(n),a=o(c.length),s=i(u,a);if(t&&e!=e){for(;a>s;)if(f=c[s++],f!=f)return!0}else for(;a>s;s++)if((t||s in c)&&c[s]===e)return t||s||0;return!t&&-1}}},function(t,n,e){var r=e(43);t.exports=function(t,n,e){if(r(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}}},function(t,n,e){var r=e(9),o=e(34),i=e(19);t.exports=function(t){var n=r(t),e=o.f;if(e)for(var u,f=e(t),c=i.f,a=0;f.length>a;)c.call(t,u=f[a++])&&n.push(u);return n}},function(t,n,e){t.exports=e(1).document&&document.documentElement},function(t,n,e){var r=e(28);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,n,e){var r=e(28);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,n,e){"use strict";var r=e(32),o=e(12),i=e(20),u={};e(5)(u,e(7)("iterator"),function(){return this}),t.exports=function(t,n,e){t.prototype=r(u,{next:o(1,e)}),i(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,e){var r=e(9),o=e(3);t.exports=function(t,n){for(var e,i=o(t),u=r(i),f=u.length,c=0;f>c;)if(i[e=u[c++]]===n)return e}},function(t,n,e){var r=e(13)("meta"),o=e(11),i=e(2),u=e(6).f,f=0,c=Object.isExtensible||function(){return!0},a=!e(8)(function(){return c(Object.preventExtensions({}))}),s=function(t){u(t,r,{value:{i:"O"+ ++f,w:{}}})},l=function(t,n){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!c(t))return"F";if(!n)return"E";s(t)}return t[r].i},p=function(t,n){if(!i(t,r)){if(!c(t))return!0;if(!n)return!1;s(t)}return t[r].w},d=function(t){return a&&v.NEED&&c(t)&&!i(t,r)&&s(t),t},v=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:p,onFreeze:d}},function(t,n,e){var r=e(6),o=e(10),i=e(9);t.exports=e(4)?Object.defineProperties:function(t,n){o(t);for(var e,u=i(n),f=u.length,c=0;f>c;)r.f(t,e=u[c++],n[e]);return t}},function(t,n,e){var r=e(19),o=e(12),i=e(3),u=e(24),f=e(2),c=e(30),a=Object.getOwnPropertyDescriptor;n.f=e(4)?a:function(t,n){if(t=i(t),n=u(n,!0),c)try{return a(t,n)}catch(t){}if(f(t,n))return o(!r.f.call(t,n),t[n])}},function(t,n,e){var r=e(3),o=e(33).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],f=function(t){try{return o(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?f(t):o(r(t))}},function(t,n,e){var r=e(2),o=e(37),i=e(21)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,e){var r=e(23),o=e(15);t.exports=function(t){return function(n,e){var i,u,f=String(o(n)),c=r(e),a=f.length;return c<0||c>=a?t?"":void 0:(i=f.charCodeAt(c),i<55296||i>56319||c+1===a||(u=f.charCodeAt(c+1))<56320||u>57343?t?f.charAt(c):i:t?f.slice(c,c+2):(i-55296<<10)+(u-56320)+65536)}}},function(t,n,e){var r=e(23),o=Math.max,i=Math.min;t.exports=function(t,n){return t=r(t),t<0?o(t+n,0):i(t,n)}},function(t,n,e){var r=e(23),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,n,e){"use strict";var r=e(44),o=e(52),i=e(17),u=e(3);t.exports=e(31)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,o(1)):"keys"==n?o(0,e):"values"==n?o(0,t[e]):o(0,[e,t[e]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,n){},function(t,n,e){"use strict";var r=e(59)(!0);e(31)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=r(n,e),this._i+=t.length,{value:t,done:!1})})},function(t,n,e){"use strict";var r=e(1),o=e(2),i=e(4),u=e(27),f=e(36),c=e(54).KEY,a=e(8),s=e(22),l=e(20),p=e(13),d=e(7),v=e(26),y=e(25),h=e(53),b=e(47),x=e(50),m=e(10),g=e(3),w=e(24),O=e(12),S=e(32),_=e(57),j=e(56),P=e(6),E=e(9),M=j.f,A=P.f,T=_.f,L=r.Symbol,N=r.JSON,C=N&&N.stringify,k="prototype",F=d("_hidden"),q=d("toPrimitive"),I={}.propertyIsEnumerable,B=s("symbol-registry"),D=s("symbols"),W=s("op-symbols"),H=Object[k],K="function"==typeof L,R=r.QObject,J=!R||!R[k]||!R[k].findChild,U=i&&a(function(){return 7!=S(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(t,n,e){var r=M(H,n);r&&delete H[n],A(t,n,e),r&&t!==H&&A(H,n,r)}:A,G=function(t){var n=D[t]=S(L[k]);return n._k=t,n},$=K&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},z=function(t,n,e){return t===H&&z(W,n,e),m(t),n=w(n,!0),m(e),o(D,n)?(e.enumerable?(o(t,F)&&t[F][n]&&(t[F][n]=!1),e=S(e,{enumerable:O(0,!1)})):(o(t,F)||A(t,F,O(1,{})),t[F][n]=!0),U(t,n,e)):A(t,n,e)},Y=function(t,n){m(t);for(var e,r=b(n=g(n)),o=0,i=r.length;i>o;)z(t,e=r[o++],n[e]);return t},Q=function(t,n){return void 0===n?S(t):Y(S(t),n)},X=function(t){var n=I.call(this,t=w(t,!0));return!(this===H&&o(D,t)&&!o(W,t))&&(!(n||!o(this,t)||!o(D,t)||o(this,F)&&this[F][t])||n)},V=function(t,n){if(t=g(t),n=w(n,!0),t!==H||!o(D,n)||o(W,n)){var e=M(t,n);return!e||!o(D,n)||o(t,F)&&t[F][n]||(e.enumerable=!0),e}},Z=function(t){for(var n,e=T(g(t)),r=[],i=0;e.length>i;)o(D,n=e[i++])||n==F||n==c||r.push(n);return r},tt=function(t){for(var n,e=t===H,r=T(e?W:g(t)),i=[],u=0;r.length>u;)!o(D,n=r[u++])||e&&!o(H,n)||i.push(D[n]);return i};K||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),n=function(e){this===H&&n.call(W,e),o(this,F)&&o(this[F],t)&&(this[F][t]=!1),U(this,t,O(1,e))};return i&&J&&U(H,t,{configurable:!0,set:n}),G(t)},f(L[k],"toString",function(){return this._k}),j.f=V,P.f=z,e(33).f=_.f=Z,e(19).f=X,e(34).f=tt,i&&!e(18)&&f(H,"propertyIsEnumerable",X,!0),v.f=function(t){return G(d(t))}),u(u.G+u.W+u.F*!K,{Symbol:L});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;nt.length>et;)d(nt[et++]);for(var nt=E(d.store),et=0;nt.length>et;)y(nt[et++]);u(u.S+u.F*!K,"Symbol",{for:function(t){return o(B,t+="")?B[t]:B[t]=L(t)},keyFor:function(t){if($(t))return h(B,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){J=!0},useSimple:function(){J=!1}}),u(u.S+u.F*!K,"Object",{create:Q,defineProperty:z,defineProperties:Y,getOwnPropertyDescriptor:V,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),N&&u(u.S+u.F*(!K||a(function(){var t=L();return"[null]"!=C([t])||"{}"!=C({a:t})||"{}"!=C(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!$(t)){for(var n,e,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);return n=r[1],"function"==typeof n&&(e=n),!e&&x(n)||(n=function(t,n){if(e&&(n=e.call(this,t,n)),!$(n))return n}),r[1]=n,C.apply(N,r)}}}),L[k][q]||e(5)(L[k],q,L[k].valueOf),l(L,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,n,e){e(25)("asyncIterator")},function(t,n,e){e(25)("observable")},function(t,n,e){e(62);for(var r=e(1),o=e(5),i=e(17),u=e(7)("toStringTag"),f=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],c=0;c<5;c++){var a=f[c],s=r[a],l=s&&s.prototype;l&&!l[u]&&o(l,u,a),i[a]=i.Array}},function(t,n){"use strict";var e={versions:function(){var t=window.navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&t.indexOf("KHTML")==-1,mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:t.indexOf("Safari")==-1,weixin:t.indexOf("MicroMessenger")==-1}}()};t.exports=e},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=e(40),i=r(o),u=function(){function t(t,n,e){return n||e?String.fromCharCode(n||e):o[t]||t}function n(t){return l[t]}var e=/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,r=/['<> "&]/g,o={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},f=/\u00a0/g,c=/<br\s*\/?>/gi,a=/\r?\n/g,s=/\s/g,l={};for(var p in o)l[o[p]]=p;return o["&apos;"]="'",l["'"]="&#39;",{encode:function(t){return t?(""+t).replace(r,n).replace(a,"<br/>").replace(s,"&nbsp;"):""},decode:function(n){return n?(""+n).replace(c,"\n").replace(e,t).replace(f," "):""},encodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")});for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e+=2)n.push(String.fromCharCode("0x"+t.slice(e,e+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,e=t.length;e>n;n++)t[n]=u.encodeObject(t[n]);else if("object"==("undefined"==typeof t?"undefined":(0,i.default)(t)))for(var r in t)t[r]=u.encodeObject(t[r]);else if("string"==typeof t)return u.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=u},function(t,n){function e(t,n){t.classList?t.classList.add(n):t.className+=" "+n}t.exports=e},function(t,n){function e(t,n){if(t.classList)t.classList.remove(n);else{var e=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(e," ")}}t.exports=e},,,function(t,n){"use strict";function e(){var t=document.querySelector("#page-nav");if(t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new){var n=document.querySelectorAll(".article-entry a:not(.article-more-a)");n.forEach(function(t){t.setAttribute("target","_blank")})}var e=document.querySelector("#js-aboutme");e&&0!==e.length&&(e.innerHTML=e.innerText)}t.exports={init:e}},,,,,,,,,function(t,n){function e(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var e=t.nextSibling;return e?t.parentNode.insertBefore(n,e):t.parentNode.appendChild(n)}t.exports=e}])</script><script src="/./main.2d7529.js"></script><script>!function(){var e=function(e){var t=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)};e("/slider.885efe.js")}()</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
      
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">所有文章</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">友链</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">关于我</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">MarkDown</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、在博客根目录（注意不是yilia根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            2、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: true
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接1</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接2</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接3</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接4</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接5</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接6</a>
            </li>
          
        </ul>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">很惭愧&lt;br&gt;&lt;br&gt;只做了一点微小的工作&lt;br&gt;谢谢大家</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>